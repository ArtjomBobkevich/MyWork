CREATE SCHEMA cloud_storage;

SET SEARCH_PATH =cloud_storage;

CREATE TABLE person (
  login VARCHAR(124) PRIMARY KEY,
  first_name VARCHAR(124) NOT NULL ,
  last_name VARCHAR(124) NOT NULL,
  age SMALLINT
);

INSERT INTO person (login, first_name, last_name, age)
VALUES
  ('user1','Ivan','Ivanov',18),
  ('hunter','Max','Faster',16),
  ('beast','Sveta','Nezabudka',30);

CREATE TABLE type_file (
  id SERIAL PRIMARY KEY ,
  name_of_type VARCHAR(124) UNIQUE NOT NULL
);

INSERT INTO type_file (name_of_type)
    VALUES
      ('Film'),
      ('Sound'),
      ('Pictures'),
      ('Book'),
      ('Serials'),
      ('Audio_files'),
      ('Games');

CREATE TABLE film_genre (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO film_genre (name_of_genre, type_file_id)
    VALUES
      ('Action',1),
      ('Drama',1),
      ('Comedy',1),
      ('Detective',1),
      ('Historical',1),
      ('Fairy tale',1),
      ('Western',1),
      ('Noir',1);

CREATE TABLE music_genre (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO music_genre (name_of_genre, type_file_id)
    VALUES
      ('Rock',2),
      ('Pop',2),
      ('Metal',2),
      ('Classic',2),
      ('Blues',2),
      ('Jazz',2),
      ('Relax',2),
      ('Rap',2);

CREATE TABLE book_genre (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO book_genre (name_of_genre, type_file_id)
    VALUES
      ('Classic',4),
      ('Poetry',4),
      ('Fantasy',4),
      ('Science fiction',4),
      ('Detective',4),
      ('Fairy tale',4),
      ('Training',4),
      ('Humor',4);

CREATE TABLE pictures_genre (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO pictures_genre (name_of_genre, type_file_id)
    VALUES
      ('Foto',3),
      ('Wallpaper',3),
      ('Avatar',3),
      ('Painting',3),
      ('Graphics',3),
      ('Sculpture',3),
      ('Digital Art',3),
      ('Booklets',3);

CREATE TABLE nationals_of_serials (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO  nationals_of_serials (name_of_genre, type_file_id)
    VALUES
      ('Russian',5),
      ('Overseas',5);

CREATE TABLE genre_of_audio_files (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO genre_of_audio_files (name_of_genre, type_file_id)
    VALUES
      ('Radio plays',7),
      ('Fantasy',7),
      ('Cultural studies',7),
      ('Religion',7);

CREATE TABLE game_genre (
  type_id SERIAL PRIMARY KEY ,
  name_of_genre VARCHAR(124) UNIQUE NOT NULL,
  type_file_id INTEGER NOT NULL REFERENCES type_file ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO game_genre (name_of_genre, type_file_id)
    VALUES
      ('Arcades',7),
      ('Strategies',7),
      ('Logical',7),
      ('Role-playing',7),
      ('Fighting',7),
      ('Simulators',7);

CREATE TABLE category (
  id SERIAL PRIMARY KEY ,
  category_name VARCHAR(124) UNIQUE NOT NULL
);

INSERT INTO category (category_name)
    VALUES
      ('Work'),
      ('Study'),
      ('Entertainment');


CREATE TABLE resource (
  id SERIAL PRIMARY KEY ,
  resource_name VARCHAR(124) NOT NULL,
  type_id INTEGER REFERENCES type_file (id) ,
  caterory_resourse INTEGER REFERENCES category (id),
  giver_name VARCHAR(123) REFERENCES person (login),
  size_on_MB INTEGER
);

CREATE TABLE resource_genre (
  resource_id INTEGER REFERENCES resource (id),
 -- genre_id INTEGER REFERENCES
)